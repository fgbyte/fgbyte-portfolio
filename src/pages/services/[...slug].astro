---
import { type CollectionEntry, getCollection } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import TopLayout from "@layouts/TopLayout.astro";
import BottomLayout from "@layouts/BottomLayout.astro";
import ArticleTopLayout from "@layouts/ArticleTopLayout.astro";
import ArticleBottomLayout from "@layouts/ArticleBottomLayout.astro";

// Create the static services pages
export async function getStaticPaths() {
    const services = await getCollection("services");
    return services.map((service) => ({
        params: { slug: service.slug },
        props: service,
    }));
}

// Get the requested service
type Props = CollectionEntry<"services">;
const service = Astro.props;
const { title, summary } = service.data;
---

<PageLayout title={title} description={summary}>
    <TopLayout>
        <div class="animate">
            <ArticleTopLayout entry={service} />
        </div>
    </TopLayout>
    <BottomLayout>
        <div class="animate">
            <ArticleBottomLayout entry={service} />
        </div>
    </BottomLayout>
</PageLayout>
